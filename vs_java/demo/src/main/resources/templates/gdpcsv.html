<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV</title>
</head>
<body>
    <h3>GDP.CSV 목록</h3>
    <button type="button" onclick="location.href='list';">회원목록</button>
    <table border="1" style="border-collapse: collapse;">
        <thead id="thead">
            <tr>
                <th>연도</th>
                <th>대한민국</th>
                <th>중국</th>
                <th>일본</th>
                <th>미국</th>
                <th>브라질</th>
                <th>페루</th>
                <th>핀란드</th>
                <th>프랑스</th>
                <th>독일</th>
                <th>스웨덴</th>
                <th>영국</th>
                <th>남아프리카공화국</th>
                <th>오스트레일리아</th>
            </tr>
        </thead>
        <tbody id="tbody">
        </tbody>
    </table>
</body>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>

        const tbody = document.getElementById('tbody');

        async function handleList() {
            const url =  `http://192.168.0.20:8558/api/gdpcsv/list.json`;
            const headers = {"Content-Type": "application/json"};
            const {data} = await axios.get(url, {headers});
            // console.log(data);
            if (data.status == 200) {
                tbody.innerHTML = '';
                for (const obj of data.list) {
                    // console.log(obj);
                    tbody.innerHTML +=
                        `<tr>` + 
                            `<td>${obj.year}</td>` +
                            `<td>${obj.korea}</td>` +
                            `<td>${obj.china}</td>` +
                            `<td>${obj.japan}</td>` +
                            `<td>${obj.usa}</td>` +
                            `<td>${obj.brazil}</td>` +
                            `<td>${obj.peru}</td>` +
                            `<td>${obj.finland}</td>` +
                            `<td>${obj.france}</td>` +
                            `<td>${obj.germany}</td>` +
                            `<td>${obj.sweden}</td>` +
                            `<td>${obj.england}</td>` +
                            `<td>${obj.southAfrica}</td>` +
                            `<td>${obj.australia}</td>` +
                        `</tr>`;
                }
            }
        }

        handleList(); // 함수 수동호출
    </script>
</html>